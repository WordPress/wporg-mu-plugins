import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(r={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},s={},t.d(s,r),s),n=["a[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],{actions:l}=(0,o.store)("wporg/query-filter",{actions:{toggleOverflowX:()=>{const e=document.querySelector(".wporg-query-filters");if(e){const t=window.getComputedStyle(e).overflowX;"hidden"===t?e.style.overflowX="scroll":"scroll"!==t&&"auto"!==t||(e.style.overflowX="hidden")}},closeDropdown:()=>{const e=(0,o.getContext)();e.isOpen=!1,e.form?.reset();const t=e.form?.querySelectorAll("input:checked").length;l.updateButtons(t),document.documentElement.classList.remove("is-query-filter-open"),l.toggleOverflowX()},updateButtons:e=>{const t=(0,o.getContext)();if(!t.form)return;const n=t.form.querySelector('input[type="submit"]'),l=t.form.querySelector(".wporg-query-filter__modal-action-clear");t.hasMultiple&&(n.value=e?n.dataset.labelWithCount.replace("%s",e):n.dataset.label),l&&l.setAttribute("aria-disabled",e?"false":"true")},toggle:()=>{const e=(0,o.getContext)();e.isOpen?l.closeDropdown():(e.isOpen=!0,document.documentElement.classList.add("is-query-filter-open"),l.toggleOverflowX())},handleKeydown:e=>{const t=(0,o.getContext)();if("Escape"===e.key)return l.closeDropdown(),void t.toggleButton.focus();"Tab"===e.key&&(e.shiftKey&&window.document.activeElement===t.firstFocusableElement?(e.preventDefault(),t.lastFocusableElement.focus()):e.shiftKey||window.document.activeElement!==t.lastFocusableElement||(e.preventDefault(),t.firstFocusableElement.focus()))},handleFormChange:()=>{const e=(0,o.getContext)().form.querySelectorAll("input:checked").length;l.updateButtons(e)},clearSelection:()=>{const e=(0,o.getContext)(),{ref:t}=(0,o.getElement)();"true"!==t.getAttribute("aria-disabled")&&(e.form.querySelectorAll("input").forEach((e=>e.checked=!1)),l.updateButtons(0))}},effects:{init:()=>{const e=(0,o.getContext)(),{ref:t}=(0,o.getElement)();if(e.toggleButton=t.querySelector(".wporg-query-filter__toggle"),e.form=t.querySelector("form"),e.isOpen){const o=t.querySelectorAll(n);e.firstFocusableElement=o[0],e.lastFocusableElement=o[o.length-1]}},checkPosition:()=>{const e=(0,o.getContext)(),{ref:t}=(0,o.getElement)();e.isOpen&&t.getBoundingClientRect().left<0&&(t.style.left=0)},focusFirstElement:()=>{const e=(0,o.getContext)(),{ref:t}=(0,o.getElement)();e.isOpen&&t.querySelector("form input:first-child").focus()}}});var r,s;